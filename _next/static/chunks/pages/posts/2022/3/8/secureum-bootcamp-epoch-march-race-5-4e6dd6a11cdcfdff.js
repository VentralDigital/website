(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1193],{57839:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/2022/3/8/secureum-bootcamp-epoch-march-race-5",function(){return n(47447)}])},64751:function(e,s){"use strict";s.Z={src:"/_next/static/media/secureum-banner.b3ad8557.jpg",height:630,width:1200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAEAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAbEAACAgMBAAAAAAAAAAAAAAAAAgEDBCEyE//EABUBAQEAAAAAAAAAAAAAAAAAAAQF/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECEf/aAAwDAQACEQMRAD8AnGFcviyPjUWS1PTJuOtgAcT9auj/2Q==",blurWidth:8,blurHeight:4}},47447:function(e,s,n){"use strict";n.r(s),n.d(s,{HiddenSolution:function(){return HiddenSolution},__toc:function(){return p}});var r=n(35250),i=n(65910),l=n.n(i),a=n(47147),c=n(77298),t=n(18363),o=n(30746),h=n.n(o),d=n(64751),x=n(13423);function HiddenSolution(e){let{children:s}=e,n=Object.assign({details:"details",summary:"summary",strong:"strong",div:"div"},(0,c.a)());return(0,r.jsxs)(n.details,{closed:!0,className:"last-of-type:mb-0 rounded-lg bg-neutral-50 dark:bg-neutral-800 p-2 mt-4",children:[(0,r.jsx)(n.summary,{children:(0,r.jsx)(n.strong,{className:"text-lg",children:"Solution"})}),(0,r.jsx)(n.div,{className:"nx-p-2",children:s})]})}let p=[{depth:3,value:"Code",id:"code"},{depth:3,value:"Question 1 of 8",id:"question-1-of-8"},{depth:3,value:"Question 2 of 8",id:"question-2-of-8"},{depth:3,value:"Question 3 of 8",id:"question-3-of-8"},{depth:3,value:"Question 4 of 8",id:"question-4-of-8"},{depth:3,value:"Question 5 of 8",id:"question-5-of-8"},{depth:3,value:"Question 6 of 8",id:"question-6-of-8"},{depth:3,value:"Question 7 of 8",id:"question-7-of-8"},{depth:3,value:"Question 8 of 8",id:"question-8-of-8"}];function _createMdxContent(e){let s=Object.assign({h1:"h1",p:"p",a:"a",em:"em",hr:"hr",h3:"h3",code:"code",pre:"pre",span:"span",strong:"strong"},(0,c.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Secureum Bootcamp Epoch∞ - February RACE #5"}),"\n","\n",(0,r.jsxs)(h(),{children:[(0,r.jsx)("meta",{property:"og:image",content:"https://ventral.digital"+d.Z.src,className:"jsx-ea2c409626c7be76"}),(0,r.jsx)("meta",{name:"twitter:image",content:"https://ventral.digital"+d.Z.src,className:"jsx-ea2c409626c7be76"})]}),"\n",(0,r.jsxs)(s.p,{children:["This is a write-up of the ",(0,r.jsx)(s.a,{href:"https://twitter.com/0xRajeev/status/1470910752085065731",children:"Secureum Bootcamp Race 5 Quiz of Epoch Infinity"})," with solutions."]}),"\n",(0,r.jsxs)(t.UW,{type:"info",children:[(0,r.jsxs)(s.p,{children:["This quiz had a strict time limit of 16 minutes for 8 questions, no pause. Choose all and ",(0,r.jsx)(s.em,{children:"only"})," correct answers."]}),(0,r.jsx)(s.p,{children:"Syntax highlighting was omitted since the original quiz did not have any either."})]}),"\n",(0,r.jsxs)("p",{className:"jsx-ea2c409626c7be76 text-xs text-right",children:["March 8, 2022 by ",(0,r.jsx)(s.a,{href:"/about#patrickd",children:"patrickd"})]}),"\n",(0,r.jsx)(l(),{id:"ea2c409626c7be76",children:"input[type=checkbox].jsx-ea2c409626c7be76{width:15px;height:15px}li.jsx-ea2c409626c7be76{padding:.5em}"}),"\n","\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"code",children:"Code"}),"\n",(0,r.jsx)(t.UW,{type:"info",children:(0,r.jsxs)(s.p,{children:["All 8 questions in this quiz are based on the ",(0,r.jsx)(s.code,{children:"InSecureum"})," contract. This is the same contract you will see for all the 8 questions in this quiz. ",(0,r.jsx)(s.code,{children:"InSecureum"})," is adapted from a well-known contract."]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"plaintext","data-theme":"default",filename:"InSecureum.sol",children:(0,r.jsxs)(s.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"3",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"pragma solidity ^0.8.0;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC1155/IERC1155.sol";'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC1155//IERC1155Receiver.sol";'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC1155//extensions/IERC1155MetadataURI.sol";'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Address.sol";'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Context.sol";'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/introspection/ERC165.sol";'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"contract InSecureum is Context, ERC165, IERC1155, IERC1155MetadataURI {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    mapping(uint256 => mapping(address => uint256)) private _balances;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    mapping(address => mapping(address => bool)) private _operatorApprovals;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    string private _uri;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    constructor(string memory uri_) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _setURI(uri_);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function supportsInterface(bytes4 interfaceId) public view virtual override(ERC165, IERC165) returns (bool) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        return"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            interfaceId == type(IERC1155).interfaceId ||"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            interfaceId == type(IERC1155MetadataURI).interfaceId ||"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            super.supportsInterface(interfaceId);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function uri(uint256) public view virtual override returns (string memory) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        return _uri;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function balanceOf(address account, uint256 id) public view virtual override returns (uint256) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(account != address(0), "ERC1155: balance query for the zero address");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        return _balances[id][account];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function balanceOfBatch(address[] memory accounts, uint256[] memory ids)"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        public"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        view"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        virtual"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        override"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        returns (uint256[] memory)"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory batchBalances = new uint256[](accounts.length);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        for (uint256 i = 0; i < accounts.length; ++i) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            batchBalances[i] = balanceOf(accounts[i], ids[i]);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        return batchBalances;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function setApprovalForAll(address operator, bool approved) public virtual override {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _setApprovalForAll(_msgSender(), operator, approved);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function isApprovedForAll(address account, address operator) public view virtual override returns (bool) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        return _operatorApprovals[account][operator];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function safeTransferFrom("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 id,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 amount,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) public virtual override {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        require("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            from == _msgSender() || isApprovedForAll(from, _msgSender()),"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'            "ERC1155: caller is not owner nor approved"'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        );"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _safeTransferFrom(from, to, id, amount, data);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function safeBatchTransferFrom("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory ids,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory amounts,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) public virtual override {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        require("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            from == _msgSender() || isApprovedForAll(from, _msgSender()),"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'            "ERC1155: transfer caller is not owner nor approved"'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        );"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _safeBatchTransferFrom(from, to, ids, amounts, data);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _safeTransferFrom("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 id,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 amount,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) public virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator = _msgSender();"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 fromBalance = _balances[id][from];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        unchecked {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            fromBalance = fromBalance - amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _balances[id][from] = fromBalance;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _balances[id][to] += amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit TransferSingle(operator, from, to, id, amount);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _doSafeTransferAcceptanceCheck(operator, from, to, id, amount, data);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _safeBatchTransferFrom("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory ids,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory amounts,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(to != address(0), "ERC1155: transfer to the zero address");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator = _msgSender();"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        for (uint256 i = 0; i < ids.length; ++i) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            uint256 id = ids[i];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            uint256 amount = amounts[i];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            uint256 fromBalance = _balances[id][from];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            fromBalance = fromBalance - amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            _balances[id][to] += amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit TransferBatch(operator, from, to, ids, amounts);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _doSafeBatchTransferAcceptanceCheck(operator, from, to, ids, amounts, data);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _setURI(string memory newuri) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _uri = newuri;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _mint("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 id,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 amount,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(to != address(0), "ERC1155: mint to the zero address");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator = _msgSender();"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _balances[id][to] += amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit TransferSingle(operator, address(0), to, id, amount);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _doSafeTransferAcceptanceCheck(operator, address(0), to, id, amount, data);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _mintBatch("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory ids,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory amounts,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator = _msgSender();"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(operator != address(0), "ERC1155: mint from the zero address");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        for (uint256 i = 0; i < ids.length; i++) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            _balances[ids[i]][to] += amounts[i];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit TransferBatch(operator, address(0), to, amounts, ids);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _doSafeBatchTransferAcceptanceCheck(operator, address(0), to, ids, amounts, data);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _burn("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 id,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 amount"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(from != address(0), "ERC1155: burn from the zero address");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator = _msgSender();"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 fromBalance = _balances[id][from];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _balances[id][from] = fromBalance - amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit TransferSingle(operator, from, address(0), id, amount);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _burnBatch("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory ids,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory amounts"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(from != address(0), "ERC1155: burn from the zero address");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator = _msgSender();"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        for (uint256 i = 0; i < ids.length; i++) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            uint256 id = ids[i];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            uint256 amount = amounts[i];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            uint256 fromBalance = _balances[id][from];"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'            require(fromBalance >= amount, "ERC1155: burn amount exceeds balance");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            unchecked {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                _balances[id][from] = fromBalance - amount;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit TransferBatch(operator, from, address(0), ids, amounts);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _setApprovalForAll("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address owner,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bool approved"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) internal virtual {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        require(owner != operator, "ERC1155: setting approval status for self");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        _operatorApprovals[owner][operator] = approved;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        emit ApprovalForAll(owner, operator, approved);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _doSafeTransferAcceptanceCheck("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 id,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256 amount,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) private {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        if (isContract(to)) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            try IERC1155Receiver(to).onERC1155Received(operator, from, id, amount, data) returns (bytes4 response) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                if (response == IERC1155Receiver.onERC1155Received.selector) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'                    revert("ERC1155: ERC1155Receiver rejected tokens");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            } catch Error(string memory reason) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                revert(reason);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            } catch {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'                revert("ERC1155: transfer to non ERC1155Receiver implementer");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function _doSafeBatchTransferAcceptanceCheck("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address operator,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address from,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        address to,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory ids,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        uint256[] memory amounts,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        bytes memory data"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) private {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        if (isContract(to)) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            try IERC1155Receiver(to).onERC1155BatchReceived(operator, from, ids, amounts, data) returns ("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                bytes4 response"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            ) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                if (response != IERC1155Receiver.onERC1155BatchReceived.selector) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'                    revert("ERC1155: ERC1155Receiver rejected tokens");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            } catch Error(string memory reason) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                revert(reason);"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            } catch {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'                revert("ERC1155: transfer to non ERC1155Receiver implementer");'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    function isContract(address account) internal view returns (bool) {"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        return account.code.length == 0;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"question-1-of-8",children:"Question 1 of 8"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"InSecureum balanceOf()"})}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. May be optimised by caching state variable in local variable"]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. May be optimised by changing state mutability from ",(0,r.jsx)(s.code,{children:"view"})," to ",(0,r.jsx)(s.code,{children:"pure"})]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. May be optimised by changing its visibility to ",(0,r.jsx)(s.code,{children:"external"})]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above  "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is D."})}),(0,r.jsxs)(s.p,{children:["Since the ",(0,r.jsx)(s.code,{children:"_balances"})," state variable is only accessed once and immediately returned, caching doesn't make sense."]}),(0,r.jsxs)(s.p,{children:["State mutability can't be changed to ",(0,r.jsx)(s.code,{children:"pure"})," since the function accesses a state variable, that requires at least ",(0,r.jsx)(s.code,{children:"view"}),"."]}),(0,r.jsxs)(s.p,{children:["It can't be changed to ",(0,r.jsx)(s.code,{children:"external"})," because it is currently being called internally by the ",(0,r.jsx)(s.code,{children:"balanceOfBatch()"})," function."]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-2-of-8",children:"Question 2 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["In ",(0,r.jsx)(s.code,{children:"InSecureum"}),", array lengths mismatch check is missing in"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. ",(0,r.jsx)(s.code,{children:"balanceOfBatch()"})]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. ",(0,r.jsx)(s.code,{children:"_safeBatchTransferFrom()"})]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. ",(0,r.jsx)(s.code,{children:"_mintBatch()"})]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. ",(0,r.jsx)(s.code,{children:"_burnBatch()"})]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is A, B, C, D."})}),(0,r.jsxs)(s.p,{children:["The public function ",(0,r.jsx)(s.code,{children:"balanceOfBatch()"})," receives a list of ",(0,r.jsx)(s.code,{children:"accounts"})," and a list of ",(0,r.jsx)(s.code,{children:"ids"}),", both of which items get passed on to ",(0,r.jsx)(s.span,{"data-rehype-pretty-code-fragment":"",children:(0,r.jsx)(s.code,{"data-language":"solidity","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"balanceOf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(accounts[i]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ids[i]);"})]})})}),". To ensure that neither array is accessed out-of-bounds, it should be checked whether both lists are of the same length."]}),(0,r.jsxs)(s.p,{children:["Neither the internal function ",(0,r.jsx)(s.code,{children:"_safeBatchTransferFrom()"})," nor its public caller function ",(0,r.jsx)(s.code,{children:"safeBatchTransferFrom()"})," check the length of passed ",(0,r.jsx)(s.code,{children:"ids"})," and ",(0,r.jsx)(s.code,{children:"amounts"}),". Therefore the check is missing."]}),(0,r.jsxs)(s.p,{children:["The internal functions ",(0,r.jsx)(s.code,{children:"_mintBatch()"})," and ",(0,r.jsx)(s.code,{children:"_burnBatch()"})," are currently never called, but a contract extending InSecureum might. It would make sense to check the lengths of passed ",(0,r.jsx)(s.code,{children:"ids"})," and ",(0,r.jsx)(s.code,{children:"amounts"})," in them, so that public functions calling them do not need to remember to do so."]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-3-of-8",children:"Question 3 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["The security concern(s) with ",(0,r.jsx)(s.code,{children:"InSecureum _safeTransferFrom()"})," is/are"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Incorrect visibility  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Susceptible to an integer underflow  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Missing zero-address validation  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above  "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is A, B, C."})}),(0,r.jsxs)(s.p,{children:["It is prefixed with an underscore, which is usually an indication of an ",(0,r.jsx)(s.code,{children:"internal"})," visibility, and it's also called by a similarly named public ",(0,r.jsx)(s.code,{children:"safeTransferFrom()"})," function that applies more input validation before calling it. This validation ensures that the sender actually has approval for the transfer of funds, which would be bypassed by this function being public. It should instead be ",(0,r.jsx)(s.code,{children:"internal"})," allowing an inheriting contract to internally call it."]}),(0,r.jsxs)(s.p,{children:["The new ",(0,r.jsx)(s.code,{children:"fromBalance"})," is calculated within an ",(0,r.jsx)(s.code,{children:"unchecked{}"})," block, bypassing integer underflow prevention measures of Solidity version ",(0,r.jsx)(s.code,{children:"0.8.0^"}),". Since the ",(0,r.jsx)(s.code,{children:"fromBalance"})," isn't checked for whether there's a sufficient balance for a transfer, this effectively allows sending unlimited amounts to the specified recipient."]}),(0,r.jsxs)(s.p,{children:["Neither ",(0,r.jsx)(s.code,{children:"safeTransferFrom()"})," nor ",(0,r.jsx)(s.code,{children:"_safeTransferFrom()"})," are checking whether the ",(0,r.jsx)(s.code,{children:"to"})," address is non-zero, making it possible to accidentally burn tokens."]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-4-of-8",children:"Question 4 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["The security concern(s) with ",(0,r.jsx)(s.code,{children:"InSecureum _safeBatchTransferFrom()"})," is/are"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Missing array lengths mismatch check "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Susceptibility to an integer underflow  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Incorrect balance update "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is A, C."})}),(0,r.jsx)(s.p,{children:"The fact that the array lengths mismatch check is missing has already been determined in Question #2."}),(0,r.jsxs)(s.p,{children:["There's no usage of an ",(0,r.jsx)(s.code,{children:"unchecked{}"})," block, therefore an integer underflow cannot happen with this Solidity version."]}),(0,r.jsxs)(s.p,{children:["The new value of ",(0,r.jsx)(s.code,{children:"fromBalance"})," is calculated but it's never actually updated in storage. This effectively allows sending the same tokens unlimited amount of times."]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-5-of-8",children:"Question 5 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["The security concern(s) with ",(0,r.jsx)(s.code,{children:"InSecureum _mintBatch()"})," is/are"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Missing array lengths mismatch check "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Incorrect event emission  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Allows burning of tokens  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above  "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is A, B, C."})}),(0,r.jsx)(s.p,{children:"The fact that the array lengths mismatch check is missing has already been determined in Question #2."}),(0,r.jsxs)(s.p,{children:["Comparing the emission of the ",(0,r.jsx)(s.code,{children:"TransferBatch"})," event to other occurrences, it appears that ",(0,r.jsx)(s.code,{children:"ids"})," and ",(0,r.jsx)(s.code,{children:"amounts"})," have been accidentally swapped."]}),(0,r.jsx)(s.p,{children:"The zero-address check incorrectly ensures that the sender is non-zero (which would never be possible anyway) instead of ensuring that the receiving account is non-zero. This effectively allows minting to the zero-address, burning all minted tokens immediately."})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-6-of-8",children:"Question 6 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["The security concern(s) with ",(0,r.jsx)(s.code,{children:"InSecureum _burn()"})," is/are"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Missing zero-address validation  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Susceptibility to an integer underflow  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Incorrect balance update  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above  "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is D."})}),(0,r.jsxs)(s.p,{children:["The zero-address validation exists and is correctly checking the value of ",(0,r.jsx)(s.code,{children:"from"}),"."]}),(0,r.jsxs)(s.p,{children:["There's no usage of an ",(0,r.jsx)(s.code,{children:"unchecked{}"})," block, therefore an integer underflow cannot happen with this Solidity version."]}),(0,r.jsx)(s.p,{children:"The balance appears to be correctly updated after subtraction."})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-7-of-8",children:"Question 7 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["The security concern(s) with ",(0,r.jsx)(s.code,{children:"InSecureum _doSafeTransferAcceptanceCheck()"})," is/are"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. ",(0,r.jsx)(s.code,{children:"isContract"})," check on incorrect address "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Incorrect check on return value "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Call to incorrect ",(0,r.jsx)(s.code,{children:"isContract"})," implementation "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above  "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is B, C."})}),(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"isContract()"})," function is correctly called on ",(0,r.jsx)(s.code,{children:"to"}),", which is the receiving address that is potentially a contract that this function is supposed to check support of ERC1155, before tokens are sent to it, since they'd otherwise be stuck in a contract not supporting this standard."]}),(0,r.jsxs)(s.p,{children:["Comparing ",(0,r.jsx)(s.code,{children:"_doSafeTransferAcceptanceCheck()"})," and ",(0,r.jsx)(s.code,{children:"_doSafeBatchTransferAcceptanceCheck()"})," shows a clear discrepancy when checking the return value, with the batch function's implementation correctly checking support for the ERC1155 standard. This function is in fact currently doing the opposite, ensuring that tokens are only sent to contracts that do NOT support it."]}),(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"isContract()"})," function currently returns ",(0,r.jsx)(s.code,{children:"true"})," if the passed address is in fact NOT a contract (has a code length of 0). It should instead return true only when the address has a code length larger than 0, showing that there's currently a contract residing at ",(0,r.jsx)(s.code,{children:"account"}),"."]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-8-of-8",children:"Question 8 of 8"}),"\n",(0,r.jsxs)(s.p,{children:["The security concern(s) with ",(0,r.jsx)(s.code,{children:"InSecureum isContract()"})," implementation is/are"]}),"\n",(0,r.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Incorrect visibility "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Incorrect operator in the comparison  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Unnecessary because Ethereum only has Contract accounts  "]}),(0,r.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,r.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above  "]})]}),"\n",(0,r.jsxs)(HiddenSolution,{children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Correct is B."})}),(0,r.jsxs)(s.p,{children:["A visibility of ",(0,r.jsx)(s.code,{children:"internal"})," allowing inheriting contracts to use it appears appropriate."]}),(0,r.jsx)(s.p,{children:'The comparison should indeed be "bigger-than-zero" instead of "equals-zero", for the reasons explained for the previous question.'}),(0,r.jsx)(s.p,{children:"Ethereum not only has Contract accounts but also EOA (Externally Owned Accounts), which do not have any contract code but an off-chain public-private keypair instead."})]}),"\n",(0,r.jsx)(s.hr,{}),"\n","\n",(0,r.jsxs)(t.oy,{children:[(0,r.jsx)(t.Zb,{icon:(0,r.jsx)(x.H8,{}),title:"← Secureum Bootcamp CARE: Sushi's BentoBox Strategies",href:"/posts/2022/2/10/secureum-bootcamp-care-audit-sushi-bentobox-strategies/"}),(0,r.jsx)(t.Zb,{icon:(0,r.jsx)(x.H8,{}),title:"← Go-To: Secureum Bootcamp Epoch∞ - February RACE #4",href:"/posts/2022/2/9/secureum-bootcamp-february-race-4/"}),(0,r.jsx)(t.Zb,{icon:(0,r.jsx)(x.H8,{}),title:"Secureum Bootcamp Epoch∞ - February RACE #6 →",href:"/posts/2022/5/16/secureum-bootcamp-epoch-may-race-6"})]})]})}s.default=(0,a.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,c.a)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/posts/2022/3/8/secureum-bootcamp-epoch-march-race-5.mdx",route:"/posts/2022/3/8/secureum-bootcamp-epoch-march-race-5",timestamp:1731290394e3,title:"Secureum Bootcamp Epoch∞ - February RACE #5",headings:p},pageNextRoute:"/posts/2022/3/8/secureum-bootcamp-epoch-march-race-5"})},96139:function(e,s,n){var r=n(94869);n(26228);var i=n(70079),l=i&&"object"==typeof i&&"default"in i?i:{default:i};function _defineProperties(e,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=void 0!==r&&r.env&&!0,isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},c=function(){function StyleSheet(e){var s=void 0===e?{}:e,n=s.name,r=void 0===n?"stylesheet":n,i=s.optimizeForSpeed,l=void 0===i?a:i;invariant$1(isString(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",invariant$1("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var c=document.querySelector('meta[property="csp-nonce"]');this._nonce=c?c.getAttribute("content"):null}var e,s=StyleSheet.prototype;return s.setOptimizeForSpeed=function(e){invariant$1("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),invariant$1(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(invariant$1(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(s,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:s}:e._serverSheet.cssRules.push({cssText:s}),n},deleteRule:function(s){e._serverSheet.cssRules[s]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===e)return document.styleSheets[s]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,s){if(invariant$1(isString(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var n=this.getSheet();"number"!=typeof s&&(s=n.cssRules.length);try{n.insertRule(e,s)}catch(s){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[s];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},s.replaceRule=function(e,s){if(this._optimizeForSpeed){var n=this.getSheet();if(s.trim()||(s=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(s,e)}catch(r){a||console.warn("StyleSheet: illegal rule: \n\n"+s+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];invariant$1(r,"old rule at index `"+e+"` not found"),r.textContent=s}return e},s.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var s=this._tags[e];invariant$1(s,"rule at index `"+e+"` not found"),s.parentNode.removeChild(s),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},s.cssRules=function(){var e=this;return this._tags.reduce(function(s,n){return n?s=s.concat(Array.prototype.map.call(e.getSheetForTag(n).cssRules,function(s){return s.cssText===e._deletedRulePlaceholder?null:s})):s.push(null),s},[])},s.makeStyleTag=function(e,s,n){s&&invariant$1(isString(s),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),s&&r.appendChild(document.createTextNode(s));var i=document.head||document.getElementsByTagName("head")[0];return n?i.insertBefore(r,n):i.appendChild(r),r},_defineProperties(StyleSheet.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e&&_defineProperties(StyleSheet,e),StyleSheet}();function invariant$1(e,s){if(!e)throw Error("StyleSheet: "+s+".")}var stringHash=function(e){for(var s=5381,n=e.length;n;)s=33*s^e.charCodeAt(--n);return s>>>0},t={};function computeId(e,s){if(!s)return"jsx-"+e;var n=String(s),r=e+n;return t[r]||(t[r]="jsx-"+stringHash(e+"-"+n)),t[r]}function computeSelector(e,s){var n=e+s;return t[n]||(t[n]=s.replace(/__jsx-style-dynamic-selector/g,e)),t[n]}var o=function(){function StyleSheetRegistry(e){var s=void 0===e?{}:e,n=s.styleSheet,r=void 0===n?null:n,i=s.optimizeForSpeed,l=void 0!==i&&i;this._sheet=r||new c({name:"styled-jsx",optimizeForSpeed:l}),this._sheet.inject(),r&&"boolean"==typeof l&&(this._sheet.setOptimizeForSpeed(l),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var e=StyleSheetRegistry.prototype;return e.add=function(e){var s=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,s){return e[s]=0,e},{}));var n=this.getIdAndRules(e),r=n.styleId,i=n.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var l=i.map(function(e){return s._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=l,this._instancesCounts[r]=1},e.remove=function(e){var s=this,n=this.getIdAndRules(e).styleId;if(function(e,s){if(!e)throw Error("StyleSheetRegistry: "+s+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var r=this._fromServer&&this._fromServer[n];r?(r.parentNode.removeChild(r),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return s._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},e.update=function(e,s){this.add(s),this.remove(e)},e.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},e.cssRules=function(){var e=this,s=this._fromServer?Object.keys(this._fromServer).map(function(s){return[s,e._fromServer[s]]}):[],n=this._sheet.cssRules();return s.concat(Object.keys(this._indices).map(function(s){return[s,e._indices[s].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},e.styles=function(e){var s,n;return s=this.cssRules(),void 0===(n=e)&&(n={}),s.map(function(e){var s=e[0],r=e[1];return l.default.createElement("style",{id:"__"+s,key:"__"+s,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},e.getIdAndRules=function(e){var s=e.children,n=e.dynamic,r=e.id;if(n){var i=computeId(r,n);return{styleId:i,rules:Array.isArray(s)?s.map(function(e){return computeSelector(i,e)}):[computeSelector(i,s)]}}return{styleId:computeId(r),rules:Array.isArray(s)?s:[s]}},e.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,s){return e[s.id.slice(2)]=s,e},{})},StyleSheetRegistry}(),h=i.createContext(null);h.displayName="StyleSheetContext";var d=l.default.useInsertionEffect||l.default.useLayoutEffect,x=new o;function JSXStyle(e){var s=x||i.useContext(h);return s&&d(function(){return s.add(e),function(){s.remove(e)}},[e.id,String(e.dynamic)]),null}JSXStyle.dynamic=function(e){return e.map(function(e){return computeId(e[0],e[1])}).join(" ")},s.style=JSXStyle},65910:function(e,s,n){"use strict";e.exports=n(96139).style},26228:function(){}},function(e){e.O(0,[3220,1589,9774,2888,179],function(){return e(e.s=57839)}),_N_E=e.O()}]);