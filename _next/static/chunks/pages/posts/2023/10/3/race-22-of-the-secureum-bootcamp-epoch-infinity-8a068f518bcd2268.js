(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6918],{76715:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/2023/10/3/race-22-of-the-secureum-bootcamp-epoch-infinity",function(){return s(69878)}])},64751:function(e,t){"use strict";t.Z={src:"/_next/static/media/secureum-banner.b3ad8557.jpg",height:630,width:1200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAEAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAbEAACAgMBAAAAAAAAAAAAAAAAAgEDBCEyE//EABUBAQEAAAAAAAAAAAAAAAAAAAQF/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECEf/aAAwDAQACEQMRAD8AnGFcviyPjUWS1PTJuOtgAcT9auj/2Q==",blurWidth:8,blurHeight:4}},69878:function(e,t,s){"use strict";s.r(t),s.d(t,{HiddenSolution:function(){return HiddenSolution},__toc:function(){return x}});var n=s(35250),a=s(65910),i=s.n(a),c=s(47147),l=s(77298),r=s(18363),o=s(30746),h=s.n(o),d=s(64751),u=s(13423);function HiddenSolution(e){let{children:t}=e,s=Object.assign({details:"details",summary:"summary",strong:"strong",div:"div"},(0,l.a)());return(0,n.jsxs)(s.details,{closed:!0,className:"last-of-type:mb-0 rounded-lg bg-neutral-50 dark:bg-neutral-800 p-2 mt-4",children:[(0,n.jsx)(s.summary,{children:(0,n.jsx)(s.strong,{className:"text-lg",children:"Solution"})}),(0,n.jsx)(s.div,{className:"nx-p-2",children:t})]})}let x=[{depth:3,value:"Question 1 of 8",id:"question-1-of-8"},{depth:3,value:"Question 2 of 8",id:"question-2-of-8"},{depth:3,value:"Question 3 of 8",id:"question-3-of-8"},{depth:3,value:"Question 4 of 8",id:"question-4-of-8"},{depth:3,value:"Question 5 of 8",id:"question-5-of-8"},{depth:3,value:"Question 6 of 8",id:"question-6-of-8"},{depth:3,value:"Question 7 of 8",id:"question-7-of-8"},{depth:3,value:"Question 8 of 8",id:"question-8-of-8"}];function _createMdxContent(e){let t=Object.assign({h1:"h1",p:"p",a:"a",strong:"strong",hr:"hr",h3:"h3",pre:"pre",code:"code",span:"span",ul:"ul",li:"li",math:"math",semantics:"semantics",mrow:"mrow",mi:"mi",annotation:"annotation",em:"em"},(0,l.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{children:"RACE #22 Of The Secureum Bootcamp Epoch∞"}),"\n","\n",(0,n.jsxs)(h(),{children:[(0,n.jsx)("meta",{property:"og:image",content:"https://ventral.digital"+d.Z.src,className:"jsx-ea2c409626c7be76"}),(0,n.jsx)("meta",{name:"twitter:image",content:"https://ventral.digital"+d.Z.src,className:"jsx-ea2c409626c7be76"})]}),"\n",(0,n.jsxs)(t.p,{children:["This is a Write-Up of RACE-22, Quiz of the ",(0,n.jsx)(t.a,{href:"https://twitter.com/0xRajeev/status/1470910752085065731",children:"Secureum Bootcamp"})," for Ethereum Smart Contract Auditors. It was designed by the legendary Secureum Mentor ",(0,n.jsx)(t.a,{href:"https://twitter.com/tinchoabbate",children:"Tincho"}),", creator of ",(0,n.jsx)(t.a,{href:"https://www.damnvulnerabledefi.xyz/",children:"Damn Vulnerable DeFi"})," and founder of ",(0,n.jsx)(t.a,{href:"https://theredguild.org/",children:"The Red Guild"}),"."]}),"\n",(0,n.jsxs)(r.UW,{type:"info",children:[(0,n.jsxs)(t.p,{children:["Participants of this quiz had to ",(0,n.jsx)(t.strong,{children:"answer 8 questions within the strict time limit of 16 minutes"}),". If you’re reading this in preparation for participating yourself, it’s best to give it a try under the same time limit!"]}),(0,n.jsx)(t.p,{children:"As usual, I waited for submissions to close before publishing it and, to stay true to the original, I omitted syntax highlighting. Feel free to copy it into your favorite editor, but do so after starting the timer!"})]}),"\n",(0,n.jsxs)("p",{className:"jsx-ea2c409626c7be76 text-xs text-right",children:["October 3, 2023 by ",(0,n.jsx)(t.a,{href:"/about#patrickd",children:"patrickd"})]}),"\n",(0,n.jsx)(i(),{id:"ea2c409626c7be76",children:"input[type=checkbox].jsx-ea2c409626c7be76{width:15px;height:15px}li.jsx-ea2c409626c7be76{padding:.5em}"}),"\n","\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-1-of-8",children:"Question 1 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"1",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract CannotReceiveETH {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    receive() external payable {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        revert();"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    function hasETH() external view returns (bool) {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        return address(this).balance > 0;"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(t.p,{children:"Select the true statement(s) about the above contract:"}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. It's impossible for the ",(0,n.jsx)(t.code,{children:"hasETH"})," function to ever return ",(0,n.jsx)(t.code,{children:"true"})]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. The contract's ETH balance may increase if the deployer sends ETH during the deployment"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. The contract's ETH balance can increase if it's the target of a ",(0,n.jsx)(t.code,{children:"SELFDESTRUCT"})," opcode"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. The contract's ETH balance can increase if it's the target of a beacon chain withdrawal"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is C, D."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"B: Solidity contracts require a payable constructor in order to be able to receive ETH during deployment. Attempting to send anything will revert."}),"\n",(0,n.jsx)(t.li,{children:"C: It's always possible to inject ETH balance into a deployed contract by specifying it as the receiver address when self-destructing another contract as this won't invoke the receiver's bytecode and doesn't give it a chance to reject."}),"\n",(0,n.jsxs)(t.li,{children:["D: ",(0,n.jsx)(t.a,{href:"https://eth2book.info/capella/part2/deposits-withdrawals/withdrawal-processing/#performing-withdrawals",children:"Beacon chain withdrawals"})," happen at protocol level outside of the EVM. They are gas-free and will not invoke the contract's bytecode."]}),"\n",(0,n.jsxs)(t.li,{children:["A: As it's possible for the contract to receive ETH after all, the ",(0,n.jsx)(t.code,{children:"hasETH"})," function may return true under the mentioned circumstances."]}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-2-of-8",children:"Question 2 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"2",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract Example {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    event FallbackExecuted(bytes data, uint256 value);"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    event ReceiveExecuted(uint256 value);"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    fallback() external payable {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        emit FallbackExecuted(msg.data, msg.value);"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    receive() external payable {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        emit ReceiveExecuted(msg.value);"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }    "})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(t.p,{children:"Select the true statement(s) about the above contract:"}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. The ",(0,n.jsx)(t.code,{children:"ReceiveExecuted"})," event is emitted when ETH is sent in a call, regardless of the length of the call’s calldata"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. The ",(0,n.jsx)(t.code,{children:"FallbackExecuted"})," event is emitted when ETH is sent in a call and the call’s calldata is not empty"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. The ",(0,n.jsx)(t.code,{children:"FallbackExecuted"})," event is emitted when no ETH is sent in a call and the call’s calldata is empty"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. The ",(0,n.jsx)(t.code,{children:"ReceiveExecuted"})," event is emitted when ETH is sent in a call and the call’s calldata starts with ",(0,n.jsx)(t.code,{children:"0xa3e76c0f"})," (the function signature of ",(0,n.jsx)(t.code,{children:"receive()"}),")"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," E. The ",(0,n.jsx)(t.code,{children:"receive"})," function only has 2300 gas available, regardless of how much the caller has sent"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is B."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A: If the calldata isn't empty, ",(0,n.jsxs)(t.a,{href:"https://docs.soliditylang.org/en/v0.8.19/contracts.html#receive-ether-function",children:[(0,n.jsx)(t.code,{children:"receive"})," is not executed"]}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["B: The ",(0,n.jsx)(t.code,{children:"fallback"})," is executed as a last resort function when none of the others match. In this case, the ",(0,n.jsx)(t.code,{children:"receive"})," function is not executed because the calldata is not empty, so execution goes to the ",(0,n.jsx)(t.code,{children:"fallback"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["C: In this case the ",(0,n.jsx)(t.code,{children:"receive"})," function is executed."]}),"\n",(0,n.jsxs)(t.li,{children:["D: If the calldata is not empty, the ",(0,n.jsx)(t.code,{children:"receive"})," is not executed. Also note that both ",(0,n.jsx)(t.code,{children:"fallback"})," and ",(0,n.jsx)(t.code,{children:"receive"})," are not like external/public functions. They have no function signature."]}),"\n",(0,n.jsxs)(t.li,{children:["E: Is false because ",(0,n.jsx)(t.code,{children:"receive"})," doesn't limit the amount of gas available. Gas may be limited when the contract was called via ",(0,n.jsx)(t.code,{children:"transfer()"})," though, for example."]}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-3-of-8",children:"Question 3 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"1",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract Example {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    function foo(uint8 data, uint64 length) external {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        // ..."})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(t.p,{children:"In the above contract, what are some safety checks automatically included by the Solidity compiler?"}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Panic if the call has value greater than zero"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Panic if the calldata's size is not larger than 4 bytes"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Panic if the calldata's size is larger than 68 bytes"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. Panic if the first parameter cannot be ABI-decoded to a ",(0,n.jsx)(t.code,{children:"uint8"})," type"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," E. Panic if the second parameter cannot be ABI-decoded to a ",(0,n.jsx)(t.code,{children:"uint64"})," type"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is A, B, D, E."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A: To functions that are not marked as ",(0,n.jsx)(t.code,{children:"payable"}),", Solidity adds bytecode for ensuring that the ",(0,n.jsx)(t.code,{children:"msg.value"})," sent is indeed zero."]}),"\n",(0,n.jsxs)(t.li,{children:["B: If the calldata's size is exactly 4 bytes, it may contain the ",(0,n.jsx)(t.code,{children:"foo"})," function's correct signature but it would error since the calldata is not of sufficient length to attempt decoding the function's parameters from. If the calldata sent does not map to an existing function, or is shorter than 4 bytes, it would error too since there's no ",(0,n.jsx)(t.code,{children:"fallback"})," or ",(0,n.jsx)(t.code,{children:"receive"})," functions to handle such a case."]}),"\n",(0,n.jsxs)(t.li,{children:["C: Solidity's ABI decoder will ignore any additional data sent that it doesn't need. If the ",(0,n.jsx)(t.code,{children:"foo"})," function was being called, it would not error if the calldata size is larger than the function's signature and its expected parameter data."]}),"\n",(0,n.jsx)(t.li,{children:"D/E: Solidity will indeed revert if parameter values are sent that do not fit within the mentioned types (ie. overflow while down-casting)."}),"\n"]}),(0,n.jsxs)(t.p,{children:["To verify these, you can compile the contract (",(0,n.jsx)(t.code,{children:"solc --ir Example.sol"}),"), read the Yul output, and see the actual checks included by the compiler. ",(0,n.jsx)(t.a,{href:"https://gist.github.com/tinchoabbate/6693719df90150bbe3f2aac66ee30ec0",children:"Here's the Yul output"}),". Tincho has marked the relevant lines with the comment ",(0,n.jsx)(t.code,{children:"//QUIZZ"})," so you can find them."]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-4-of-8",children:"Question 4 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"1",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract Example {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    uint8[] public someArray = new uint8[](300);"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    function foo(uint32 a, uint32 b, uint32 index) external {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        unchecked {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            someArray[index] = uint8(a / b);"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(t.p,{children:"Which of the statement(s) is/are true about the above contract?"}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Due to the use of ",(0,n.jsx)(t.code,{children:"unchecked"}),", out-of-bound access protections are disabled. So when the ",(0,n.jsx)(t.code,{children:"index"})," parameter is greater than 300, execution does not revert"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Due to the use of ",(0,n.jsx)(t.code,{children:"unchecked"}),", when ",(0,n.jsx)(t.code,{children:"b"})," is 0, ",(0,n.jsx)(t.code,{children:"a / b"})," does not revert and results in 0"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. The use of ",(0,n.jsx)(t.code,{children:"unchecked"})," eliminates the compiler’s automatic overflow check when casting the result of ",(0,n.jsx)(t.code,{children:"a / b"})," to ",(0,n.jsx)(t.code,{children:"uint8"})]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. None of the above"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is D."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"A: Unchecked-blocks do not disable out-of-bound access checks in Solidity. You can verify this by copying the contract in Remix, calling the function with an index of 299 and checking that the tx doesn't revert. Then do the same, but with an index of 300, and the tx reverts."}),"\n",(0,n.jsx)(t.li,{children:"B: Unchecked-blocks do not cause division-through-zero occurrences to be ignored. Easy to verify in Remix too."}),"\n",(0,n.jsxs)(t.li,{children:["C: Unsafe downcasting will indeed not revert, but not because of the use of unchecked, but because the down-cast is made explicitly. If you remove the unchecked block, and the result of ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mi,{children:"a"}),(0,n.jsx)(t.mi,{mathvariant:"normal",children:"/"}),(0,n.jsx)(t.mi,{children:"b"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"a/b"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",children:"a"}),(0,n.jsx)(t.span,{className:"mord",children:"/"}),(0,n.jsx)(t.span,{className:"mord mathnormal",children:"b"})]})})]})," is greater than 255, execution still succeeds (silently overflowing the result). Again, you can check this in Remix."]}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-5-of-8",children:"Question 5 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"1",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract Example {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    function callAndRevert(address target, bytes calldata payload) external {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        assembly (“memory-safe”) {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            call(gas(), target, callvalue(), add(payload, 32), payload, 0, 0)"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            returndatacopy(0, 0, returndatasize())"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            revert(0, returndatasize())"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(t.p,{children:"Which of the statement(s) is/are true about the above contract when trying to compile using solc 0.8.17 without optimizations?"}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. Compilation fails because ",(0,n.jsx)(t.code,{children:"callvalue()"})," is used but the function is not payable"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. Compilation fails because the assembly block is marked ",(0,n.jsx)(t.code,{children:"“memory safe”"})," but memory can potentially be read and written"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. Compilation succeeds, although the compiler emits a warning due to the unused return value of ",(0,n.jsx)(t.code,{children:"call"})]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. Compilation succeeds without any warnings"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," E. None of the above"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is E."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A: A function not being payable simply means that there's no check whether value was sent when the function is called. But checking ",(0,n.jsx)(t.code,{children:"callvalue"}),"/",(0,n.jsx)(t.code,{children:"msg.value"})," is still allowed."]}),"\n",(0,n.jsxs)(t.li,{children:["B: The ",(0,n.jsx)(t.a,{href:"https://docs.soliditylang.org/en/latest/assembly.html#memory-safety",children:"“memory safe” flag"})," merely tells the compiler that it may rely on the assembly block respecting Solidity's memory layout and therefore being able to apply certain optimizations. Compilation won't fail from the assembly-block reading or writing memory in any way."]}),"\n",(0,n.jsxs)(t.li,{children:["C/D: Doesn't compile because the ",(0,n.jsx)(t.code,{children:"payload"})," variable is a data element and can't be accessed like that. Instead one has to use its ",(0,n.jsx)(t.code,{children:".offset"})," or ",(0,n.jsx)(t.code,{children:".length"})," attributes. A second compilation error is that call returns a value which is not used, and it needs to be either assigned or discarded."]}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-6-of-8",children:"Question 6 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"1",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract Example {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    function callAndRevert(address target, bytes memory payload) external payable {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        assembly (“memory-safe”) {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            let result := call(gas(), target, callvalue(), add(payload, 32), payload, 0, 0)"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            returndatacopy(0, 0, returndatasize())"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            revert(0, returndatasize())"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(t.p,{children:["A developer does some minor changes on the previous contract, resulting in the above contract. Which of the statement(s) is/are true when calling ",(0,n.jsx)(t.code,{children:"callAndRevert"}),"?"]}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. The transaction reverts before the external call if the bytes in the ",(0,n.jsx)(t.code,{children:"payload"})," parameter are not properly ABI-encoded"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. The transaction reverts before the final ",(0,n.jsx)(t.code,{children:"revert"})," operation when ",(0,n.jsx)(t.code,{children:"target"})," is an account without code"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. The transaction reverts before the final ",(0,n.jsx)(t.code,{children:"revert"})," operation when execution in the ",(0,n.jsx)(t.code,{children:"target"})," account reverts"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. The transaction reverts before the final ",(0,n.jsx)(t.code,{children:"revert"})," operation when the callee runs out of gas"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," E. None of the above"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is E."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A: The ",(0,n.jsx)(t.code,{children:"payloads"})," contents are not checked for their ABI-compatibility before the call is made as it may be non-ABI encoded contents that the target is expecting. It's simply that ",(0,n.jsx)(t.code,{children:"bytes"})," could be anything, it may be something ABI-encoded, it may be something completely different, like the binary data of an image."]}),"\n",(0,n.jsxs)(t.li,{children:["B: No, ",(0,n.jsx)(t.code,{children:"CALL"}),"ing a contract without any code directly will always succeed. This ",(0,n.jsx)(t.code,{children:"assembly"}),"-block skips the check contract-size check that Solidity would do before attempting to call the ",(0,n.jsx)(t.code,{children:"target"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["C: If the execution in the ",(0,n.jsx)(t.code,{children:"target"})," account reverts, this won't revert the entire transaction but only the actions done within the context of that ",(0,n.jsx)(t.code,{children:"CALL"}),". Whether a revert happened can be known by checking the boolean value returned by executing the ",(0,n.jsx)(t.code,{children:"CALL"})," opcode. The revert is not bubbled-up to the caller context, so execution continues."]}),"\n",(0,n.jsx)(t.li,{children:"D: If the callee runs out of gas, the revert is again not bubbled-up. Furthermore, one 64th of gas is always put aside for the caller. Even if the callee uses up all of the gas they had available, the caller should still have some gas left to execute a few more operations and it may be enough to finish the transaction without reverting."}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-7-of-8",children:"Question 7 of 8"}),"\n",(0,n.jsx)(t.pre,{"data-language":"plaintext","data-theme":"default",children:(0,n.jsxs)(t.code,{"data-line-numbers":"","data-language":"plaintext","data-theme":"default","data-line-numbers-max-digits":"1",children:[(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"contract Example {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    function callAndRevert(address target, bytes memory payload) external payable {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        assembly (“memory-safe”) {"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            let result := call(gas(), target, callvalue(), add(payload, 32), payload, 0, 0)"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            returndatacopy(0, 0, returndatasize())"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"            revert(0, returndatasize())"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(t.span,{className:"line",children:(0,n.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(t.p,{children:["Continuing with the same contract, what are the consequences of annotating the ",(0,n.jsx)(t.code,{children:"assembly"})," block as ",(0,n.jsx)(t.code,{children:"“memory-safe”"})," ?"]}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. It’s a good practice to help auditors, and never affects the compiler’s behavior"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. The bytes in ",(0,n.jsx)(t.code,{children:"payload"})," are checked to be ABI-encoded before storing them in memory"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. ",(0,n.jsx)(t.code,{children:"returndatacopy"})," will revert if ",(0,n.jsx)(t.code,{children:"returndatasize"})," is greater than zero, due to writing to Solidity’s reserved memory space"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. Return bomb attacks are prevented due to safety checks introduced by the compiler on the size of the returned data copied to memory"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," E. None of the above"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is E."})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A: No, it's a flag telling communicating to the compiler that the ",(0,n.jsx)(t.code,{children:"assembly"}),"-block respect's Solidity's memory layout and it affects the compiler's use of optimizations."]}),"\n",(0,n.jsxs)(t.li,{children:["B: No, since ",(0,n.jsx)(t.code,{children:"bytes"})," are allowed to be any sort of value and are not necessarily always ABI-encoded. They are simply copied into memory without checks until an attempt to actually decode them is made."]}),"\n",(0,n.jsx)(t.li,{children:"C: No, writing into Solidity's reserved memory space will not cause a revert. There's no code checking this and the EVM is unaware of Solidity's expectations around memory. There's nothing preventing this."}),"\n",(0,n.jsxs)(t.li,{children:["D: Solidity does not add any safety checks to ",(0,n.jsx)(t.code,{children:"assembly"}),"-blocks. The responsibility lies with the author."]}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"question-8-of-8",children:"Question 8 of 8"}),"\n",(0,n.jsxs)(t.p,{children:["Alice and Bob have the exact same Solidity contract. Each one compiles the contract in their machines with the same compiler version and settings (e.g., running solc ",(0,n.jsx)(t.code,{children:"Example.sol —bin"}),") . Then they compare the resulting outputs. Which of the following statement(s) is/are true?"]}),"\n",(0,n.jsxs)("ul",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," A. The output is the same, because the contract and compiler version and settings are exactly the same"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," B. The output is different, because Mercury and Venus are not aligned at the moment of compilation"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," C. The output is different, because by default the bytecode includes extra non-executable bytes that depend on each one’s compilation environment"]}),(0,n.jsxs)("li",{className:"jsx-ea2c409626c7be76",children:[(0,n.jsx)("input",{type:"checkbox",className:"jsx-ea2c409626c7be76"})," D. The output is different, but they could use a compiler flag that would make solc produce the same outputs everywhere"]})]}),"\n",(0,n.jsxs)(HiddenSolution,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Correct is C, D."})}),(0,n.jsxs)(t.p,{children:["By default, ",(0,n.jsx)(t.em,{children:"solc"})," includes the metadata hash as part of the output bytecode. This hash is dependent on the compilation environment (for example, ",(0,n.jsx)(t.em,{children:"path"})," and ",(0,n.jsx)(t.em,{children:"filename"}),"). Therefore the output will be different between Alice and Bob. The compiler flag that would solve the issue is ",(0,n.jsx)(t.code,{children:"--metadata-hash none"}),", which removes the hash from the output."]}),(0,n.jsx)(t.p,{children:"You can verify this with two equal contracts in the same directory with different filenames. Compile them as usual, and compare the bytecode, noting that it's different. Then compile again but with the flag, and you'll see the output now is the same."}),(0,n.jsx)(t.p,{children:"Lesson: Solidity is weird."})]}),"\n",(0,n.jsx)(t.hr,{}),"\n","\n",(0,n.jsxs)(r.oy,{children:[(0,n.jsx)(r.Zb,{icon:(0,n.jsx)(u.H8,{}),title:"← RACE #21 Of The Secureum Bootcamp Epoch∞",href:"/posts/2023/9/5/race-21-of-the-secureum-bootcamp-epoch-infinity/"}),(0,n.jsx)(r.Zb,{icon:(0,n.jsx)(u.H8,{}),title:"RACE #23 Of The Secureum Bootcamp Epoch∞ →",href:"/posts/2023/11/8/race-23-of-the-secureum-bootcamp-epoch-infinity"})]})]})}t.default=(0,c.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,l.a)(),e.components);return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/posts/2023/10/3/race-22-of-the-secureum-bootcamp-epoch-infinity.mdx",route:"/posts/2023/10/3/race-22-of-the-secureum-bootcamp-epoch-infinity",timestamp:1731290394e3,title:"RACE #22 Of The Secureum Bootcamp Epoch∞",headings:x},pageNextRoute:"/posts/2023/10/3/race-22-of-the-secureum-bootcamp-epoch-infinity"})},96139:function(e,t,s){var n=s(94869);s(26228);var a=s(70079),i=a&&"object"==typeof a&&"default"in a?a:{default:a};function _defineProperties(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=void 0!==n&&n.env&&!0,isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function StyleSheet(e){var t=void 0===e?{}:e,s=t.name,n=void 0===s?"stylesheet":s,a=t.optimizeForSpeed,i=void 0===a?c:a;invariant$1(isString(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",invariant$1("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l=document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var e,t=StyleSheet.prototype;return t.setOptimizeForSpeed=function(e){invariant$1("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),invariant$1(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(invariant$1(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(c||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(invariant$1(isString(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return c||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed){var s=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(n){c||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];invariant$1(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},t.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];invariant$1(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},t.cssRules=function(){var e=this;return this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,s){t&&invariant$1(isString(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return s?a.insertBefore(n,s):a.appendChild(n),n},_defineProperties(StyleSheet.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e&&_defineProperties(StyleSheet,e),StyleSheet}();function invariant$1(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var stringHash=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},r={};function computeId(e,t){if(!t)return"jsx-"+e;var s=String(t),n=e+s;return r[n]||(r[n]="jsx-"+stringHash(e+"-"+s)),r[n]}function computeSelector(e,t){var s=e+t;return r[s]||(r[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),r[s]}var o=function(){function StyleSheetRegistry(e){var t=void 0===e?{}:e,s=t.styleSheet,n=void 0===s?null:s,a=t.optimizeForSpeed,i=void 0!==a&&a;this._sheet=n||new l({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),n&&"boolean"==typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var e=StyleSheetRegistry.prototype;return e.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),n=s.styleId,a=s.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var i=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=i,this._instancesCounts[n]=1},e.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var n=this._fromServer&&this._fromServer[s];n?(n.parentNode.removeChild(n),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},e.update=function(e,t){this.add(t),this.remove(e)},e.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},e.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},e.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],n=e[1];return i.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},e.getIdAndRules=function(e){var t=e.children,s=e.dynamic,n=e.id;if(s){var a=computeId(n,s);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return computeSelector(a,e)}):[computeSelector(a,t)]}}return{styleId:computeId(n),rules:Array.isArray(t)?t:[t]}},e.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},StyleSheetRegistry}(),h=a.createContext(null);h.displayName="StyleSheetContext";var d=i.default.useInsertionEffect||i.default.useLayoutEffect,u=new o;function JSXStyle(e){var t=u||a.useContext(h);return t&&d(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}JSXStyle.dynamic=function(e){return e.map(function(e){return computeId(e[0],e[1])}).join(" ")},t.style=JSXStyle},65910:function(e,t,s){"use strict";e.exports=s(96139).style},26228:function(){}},function(e){e.O(0,[3220,1589,9774,2888,179],function(){return e(e.s=76715)}),_N_E=e.O()}]);